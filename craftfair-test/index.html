<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vendor Map</title>
  <style>
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .wrap{max-width:1100px;margin:0 auto;padding:12px}
    .frame{height:min(80vh,720px);min-height:520px;border-radius:14px;overflow:hidden;box-shadow:0 8px 22px rgba(0,0,0,.12);position:relative;touch-action: pan-x pan-y;}
    .stage{position:absolute;inset:0;transform-origin:0 0;will-change:transform}
    .stage img{width:100%;height:100%;object-fit:contain;display:block;user-select:none;-webkit-user-drag:none;pointer-events:none}
    .hotspot{position:absolute;width:5%;height:5%;border-radius:10px;background:rgba(255,255,0,.12);outline:2px dashed rgba(0,0,0,.35);cursor:pointer}
    /* turn off highlighting once placed: set background/outline to transparent */
    .modalBG{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:16px;z-index:9999}
    .card{background:#fff;border-radius:14px;max-width:420px;width:100%;box-shadow:0 18px 50px rgba(0,0,0,.35);overflow:hidden}
    .card h3{margin:0;padding:14px 16px;font-size:18px}
    .card .body{padding:0 16px 14px;color:#333}
    .card .actions{display:flex;gap:10px;padding:0 16px 16px}
    .btn{flex:1;padding:10px 12px;border-radius:12px;border:1px solid #ddd;background:#fff;font-weight:600;cursor:pointer}
    .btnA{display:inline-flex;align-items:center;justify-content:center;text-decoration:none;color:#000;border-color:#000}
    .hint{color:#555;font-size:14px;margin:10px 2px 0}
  </style>
</head>
<body>
  <div class="wrap">
    <div id="frame" class="frame">
      <div id="stage" class="stage">
        <img src="map.png" alt="Vendor map">

        <!-- Hotspots: adjust left/top until they sit on booths -->
        <button class="hotspot" style="left:18%;top:24%;" data-id="booth12" aria-label="Booth 12"></button>
        <button class="hotspot" style="left:52%;top:41%;" data-id="booth27" aria-label="Booth 27"></button>
      </div>
    </div>
    <div class="hint">Tip: drag to pan • mousewheel/pinch to zoom • tap a booth for details</div>
  </div>

  <div id="bg" class="modalBG" role="dialog" aria-modal="true">
    <div class="card">
      <h3 id="mName"></h3>
      <div id="mDesc" class="body"></div>
      <div class="actions">
        <a id="mLink" class="btn btnA" target="_blank" rel="noopener">Visit vendor</a>
        <button class="btn" onclick="closeModal()">Close</button>
      </div>
    </div>
  </div>

  <script>
    const vendors = {
      booth12: { name:"Example Coffee", desc:"Cold brew • pastries", link:"https://facebook.com/" },
      booth27: { name:"Example Jewelry", desc:"Sterling • stones", link:"https://example.com" }
    };

    const bg = document.getElementById("bg");
    const mName = document.getElementById("mName");
    const mDesc = document.getElementById("mDesc");
    const mLink = document.getElementById("mLink");

    function openModal(id){
      const v = vendors[id]; if(!v) return;
      mName.textContent = v.name;
      mDesc.textContent = v.desc || "";
      mLink.href = v.link || "#";
      bg.style.display = "flex";
    }
    function closeModal(){ bg.style.display = "none"; }
    bg.addEventListener("click", e => { if(e.target===bg) closeModal(); });

    document.querySelectorAll(".hotspot").forEach(b=>{
      b.addEventListener("click", ()=>openModal(b.dataset.id));
    });

    // Pan/zoom
    const stage = document.getElementById("stage");
    const frame = document.getElementById("frame");
    let scale=1, x=0, y=0, isPanning=false, sx=0, sy=0;

    function apply(){ stage.style.transform = `translate(${x}px,${y}px) scale(${scale})`; }
    apply();

    frame.addEventListener("wheel", (e)=>{
      e.preventDefault();
      const rect = frame.getBoundingClientRect();
      const cx = e.clientX - rect.left;
      const cy = e.clientY - rect.top;
      const delta = Math.sign(e.deltaY) * -0.08;
      const next = Math.min(4, Math.max(1, scale * (1 + delta)));
      x = cx - (cx - x) * (next / scale);
      y = cy - (cy - y) * (next / scale);
      scale = next; apply();
    }, {passive:false});

    frame.addEventListener("pointerdown",(e)=>{
      if(e.target.classList.contains("hotspot")) return;
      isPanning=true; sx=e.clientX-x; sy=e.clientY-y;
      frame.setPointerCapture(e.pointerId);
    });
    frame.addEventListener("pointermove",(e)=>{
      if(!isPanning) return;
      x=e.clientX-sx; y=e.clientY-sy; apply();
    });
    frame.addEventListener("pointerup",()=>isPanning=false);
    frame.addEventListener("pointercancel",()=>isPanning=false);
  </script>
</body>
</html>
